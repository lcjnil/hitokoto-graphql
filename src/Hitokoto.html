<div class="root typo">
  <p class="content">{{ content }}</p>
  <p class="info">
    <span class="author">{{ author }}</span>
    <span class="source">《{{ source }}》</span>
  </p>
</div>

<script>
  import {randomHitokotoQuery} from './query'

  export default {
    data() {
      return {
        content: '....',
        author: '...',
        source: '..'
      }
    },

    onrender() {
      this.getRandomHitokoto()
    },

    methods: {
      getRandomHitokoto() {
        fetch('/graphql', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            query: randomHitokotoQuery
          })
        }).then(r => r.json())
          .then(r => r.data.randomHitokoto)
          .then(this.set)
      }
    }
  }
</script>

<style>
  .root {
    width: 800px;
    margin: 0 auto;
  }
  .content {
    font-size: 30px;
    position: relative;
  }

  .content:before, .content:after {
    font-weight: 500;
  }

  .content:before {
    content: '「';
    position: absolute;
    top: -10px;
    left: -40px;
  }

  .content:after {
    content: '」';
    position: absolute;
    bottom: 0;
    right: -20px;
  }

  .info {
    font-size: 20px;
    text-align: right;
  }

  .author:before {
    content: '——';
    margin-right: 5px;
  }

  .source {
    color: black;
  }
</style>
